$(document).ready(function(){
  $('.categories').sortable({
    axis: 'y',
    dropOnEmpty: false,
    handle: '.handle',
    cursor: 'crosshair',
    items: 'li',
    opacity: 0.4,
    scroll: true,
    update: function(event, ui){
      $.ajax({
        type: 'post',
        data: $(event.target).sortable('serialize'),
        dataType: 'script',
        complete: function(request){
          $(event.target).effect('highlight');
        },
        url: '/<%=ENV["RAILS_RELATIVE_URL_ROOT"] %>/categories/sort'})
    }
  });
});
